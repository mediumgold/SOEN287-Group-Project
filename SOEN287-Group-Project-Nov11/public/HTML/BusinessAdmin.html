<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../CSS/BusinessAdmin.css">
    <title>Admin Dashboard</title>
</head>
<body>
    <nav class="navbar">
        <div class="company-nav-logo">
            <a href="index.html"><img src="../assets/company logo placeholder for a website.png" alt="Company Logo"/></a>
            <h2 id="title">Company Name</h2>
        </div>

        <ul class="nav-links">
            <li class="link"><a href="index.html">Home</a></li>
            <li class="link"><a href="services.html">Services</a></li>
            <li class="link"><a href="about.html">About</a></li>
            <li class="link"><a href="contact.html">Contact</a></li>
            <li class="link"><a href="account.html">Account</a></li>
            <li class="link"><a href="cart.html">Cart</a></li>
        </ul>

        <!-- Add logout button -->
        <button id="logout-button" class="btn" onclick="window.location.href='index.html'">Logout</button>
    </nav>

    <div class="container">
        <h2>Edit Customer Information For Administration</Form></h2>
        <p>Business Name: <span id="business-name">Your Business Name</span></p>
        <p>Logo: <span id="business-logo">Your Logo URL</span></p>


        <!DOCTYPE html>
        
        <h2>Manage Orders</h2>
        <div id="orderListContainer">
            <table id="orderList">
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>User ID</th>
                        <th>Total Price</th>
                        <th>Order Date</th>
                    </tr>
                </thead>
                <tbody id="orderTableBody">
                    <!-- Order data will be rendered here -->
                </tbody>
            </table>
        </div>

        <h2>Manage Admin Services</h2>
        <form id="service-form">
            <input type="number" name="order_id" placeholder="Order ID" required>
            <input type="number" name="user_id" placeholder="User ID" required>
            <input type="text" name="name" placeholder="Service Name" required>
            <input name="service_content" placeholder="Service Content" required>
            <input type="number" name="total_price" placeholder="Total Price" required>
            <button type="submit">Add Service</button>
        </form>
        
        <h2>Current Services</h2>
        <ul id="current-services"></ul>

        
        <h2>Confirm Service Execution</h2>
        <form id="confirm-service-form">
            <input type="text" name="order_id" placeholder="Order ID" required>
            <button type="submit">Confirm</button>
        </form>

        <h2>Follow Up with Customers for Unpaid Bills</h2>
        <ul id="unpaid-bills-list"></ul>

        <h2>Update Unpaid Customers</h2>
        <form id="unpaid-customer-form">
            <input type="text" name="order_id" placeholder="Order ID" required>
            <input type="number" name="unpaid_amount" placeholder="Amount Paid" required>
            <button type="submit">Update Customer</button>
        </form>
        <h2>Service Overview</h2>
        <table>
            <thead>
                <tr>
                    <th>Order ID</th>
                    <th>User ID</th>
                    <th>Name</th>
                    <th>Service Content</th>
                    <th>Total Price</th>
                    <th>Paid</th>
                    <th>Unpaid</th>
                </tr>
            </thead>
            <tbody id="service-overview-list"></tbody>
        </table>
        <button id="updateButton">Update</button>

        <script>
            
            const updateButton = document.getElementById('updateButton');
    
            
            updateButton.addEventListener('click', async function() {
                try {
                    
                    const response = await fetch('http://localhost:5500/migrate-data', {
                        method: 'GET',  
                        headers: {
                            'Content-Type': 'application/json',
                        }
                    });
    
                    if (response.ok) {
                        alert('Data migration started successfully!');
                    } else {
                        alert('Failed to start data migration.');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    alert('An error occurred while starting the data migration.');
                }
            });
        </script>

    <script>
        // Check admin login
        document.addEventListener('DOMContentLoaded', function() {
            const isAdmin = localStorage.getItem('isAdmin');

            if (!isAdmin || isAdmin !== 'true') {
                alert('Access denied. Admins only.');
                window.location.href = 'login.html';  // Redirect to login page if not admin
            }

        });
    </script>
    <script src="../JS/BusinessAdmin.js"></script>
</body>
</html>
